# Future Improvements

このドキュメントは、`snackPersona` の今後の拡張案を整理するためのメモです。

## 1. Persona 投稿スタイル拡張: つぶやき投稿

### 目的
- ペルソナの投稿を「議論投稿」だけでなく、日常的で短い「つぶやき」も含む形に拡張する。
- タイムライン上の自然さと人間らしさを強化する。

### 方向性
- 投稿タイプに `tweet_like`（短文つぶやき）を追加
- コンテキストに応じて、`post` / `reply` / `tweet_like` を選択
- ペルソナごとに「つぶやき頻度」「温度感」「口調」をパラメータ化

### 検討ポイント
- つぶやきが増えすぎてノイズ化しない制御（頻度上限）
- 評価指標への反映（自然さ、参加率、話題接続度）

## 2. メタプログラミング拡張: API ハンドラ生成・実行

### 目的
- ペルソナが固定実装に依存せず、必要に応じて外部 API を扱うハンドラを生成し、探索・収集を自律的に行えるようにする。

### 方向性
- 特定API固定ではなく、`OpenAPI/仕様情報 -> ハンドラコード生成 -> 実行` の共通フローを用意
- 生成対象は YouTube Data API を含む任意API
- 生成ハンドラをサンドボックスで実行し、取得データを島の `content` に取り込む

### 想定フロー
1. API仕様（エンドポイント、認証方式、レスポンス形）を入力
2. LLM が API ハンドラ（呼び出し・再試行・ページネーション対応）を生成
3. ランタイムで安全に実行
4. 取得データを要約・正規化して `IslandContent` として蓄積

### 検討ポイント
- 安全性（許可API、ネットワーク先、実行時間、Secrets管理）
- 生成コードの品質保証（型・リトライ・エラーハンドリング）
- 監査ログ（どのペルソナがどのAPIを何目的で実行したか）

## 3. Island 自動運用（関連）

- ペルソナ特性ベースのクラスタリングで島を自動生成
- `IslandContent` の TTL 到達時に、ペルソナ判断で保持/破棄
- 住民増加時は「人数 + 凝集度低下」を条件に島を分裂

